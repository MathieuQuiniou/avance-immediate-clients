<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Avance Immédiate - Eddmon × Urssaf</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bleu: #3739da;
      --orange: #ff6f00;
      --vert: #10b981;
      --blanc: #fff;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: white;
      margin: 0;
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
      overflow-y: hidden;
      /* ← AJOUTEZ CETTE LIGNE */
    }

    html {
      overflow-x: hidden;
      overflow: hidden;
      /* ← AJOUTEZ CETTE LIGNE */
    }

    .container {
      background: white;
      border-radius: 16px;
      max-width: 600px;
      width: 100%;
      padding: 40px;
      position: relative;
    }

    .status-dot {
      position: absolute;
      bottom: 0;
      right: 0;
      width: 10px;
      height: 10px;
      background: var(--vert);
      border: 2px solid white;
      border-radius: 50%;
    }

    input[type="date"] {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-family: 'Poppins', sans-serif;
      font-size: 14px;
      transition: all 0.3s ease;
      -webkit-appearance: none;
      /* Supprime le style natif iOS */
      appearance: none;
      background: white;
      min-height: 48px;
      /* Hauteur minimale pour iOS */
    }

    /* Responsive général */
    @media (max-width: 768px) {
      .container {
        padding: 20px 15px 120px !important;
        /* 120px en bas pour l'espace */
        margin: 10px;
        width: 95%;
      }

      input[type="date"] {
        font-size: 16px;
        /* Évite le zoom automatique sur iOS */
        padding: 14px 16px;
      }

      .logos {
        gap: 10px;
      }

      .logo-img {
        height: 30px;
      }

      .header h1 {
        font-size: 18px;
      }

      .form-row {
        grid-template-columns: 1fr;
      }

      .support-bubble {
        position: fixed;
        top: auto;
        bottom: 20px;
        right: 20px;
        flex-direction: row;
        padding: 8px 15px 8px 8px;
        gap: 8px;
        margin-right: 0;
      }

      .support-avatar {
        width: 40px;
        height: 40px;
      }

      .support-phone {
        font-size: 14px;
      }

      .support-text {
        font-size: 11px;
      }

      .step-label {
        font-size: 10px;
      }
    }

    /* Pour les très petits écrans */
    @media (max-width: 400px) {
      .container {
        padding: 15px 10px 120px !important;
        /* 120px en bas */
      }

      .logos {
        flex-direction: column;
        align-items: flex-start;
      }

      .separator {
        display: none;
      }

      .logo-img {
        height: 25px;
        margin-bottom: 5px;
      }
    }


    .header {
      text-align: center;
      margin-bottom: 30px;
    }

    .logos {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin-bottom: 20px;
    }

    .logo-img {
      height: 40px;
    }

    .separator {
      color: #ccc;
      font-size: 20px;
    }

    h1 {
      color: var(--bleu);
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .time-info {
      display: inline-block;
      background: #e6f7f0;
      color: var(--vert);
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 500;
      margin-top: 10px;
    }

    .progress-bar {
      display: flex;
      justify-content: space-between;
      margin: 30px 0;
      position: relative;
    }

    .progress-bar::before {
      content: '';
      position: absolute;
      top: 15px;
      left: 0;
      right: 0;
      height: 2px;
      background: #e0e0e0;
      z-index: 0;
    }

    .progress-bar::after {
      content: '';
      position: absolute;
      top: 15px;
      left: 0;
      height: 2px;
      background: var(--bleu);
      z-index: 1;
      transition: width 0.3s ease;
    }

    .progress-bar.step-1::after {
      width: 0%;
    }

    .progress-bar.step-2::after {
      width: 50%;
    }

    .progress-bar.step-3::after {
      width: 100%;
    }

    .progress-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 2;
    }

    .step-circle {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: white;
      border: 2px solid #e0e0e0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
      color: #999;
      transition: all 0.3s ease;
    }

    .progress-step.active .step-circle,
    .progress-step.completed .step-circle {
      border-color: var(--bleu);
      background: var(--bleu);
      color: white;
    }

    .step-label {
      margin-top: 8px;
      font-size: 12px;
      color: #999;
      font-weight: 500;
      text-align: center;
    }

    .progress-step.active .step-label {
      color: var(--bleu);
      font-weight: 600;
    }

    .form-step {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    .form-step.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .warning-box {
      background: #e6f7f0;
      border-left: 4px solid var(--vert);
      padding: 15px;
      margin-bottom: 25px;
      border-radius: 8px;
    }

    .warning-text {
      font-size: 13px;
      color: #666;
      line-height: 1.6;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      color: var(--bleu);
      font-weight: 500;
      font-size: 14px;
    }

    .required {
      color: var(--orange);
    }

    .help-text {
      font-size: 12px;
      color: #999;
      margin-bottom: 5px;
      font-weight: 300;
    }

    input,
    select {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-family: 'Poppins', sans-serif;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    input:focus,
    select:focus {
      outline: none;
      border-color: var(--bleu);
      box-shadow: 0 0 0 3px rgba(55, 57, 218, 0.1);
    }

    .button-group {
      display: flex;
      gap: 15px;
      margin-top: 30px;
    }

    button {
      flex: 1;
      padding: 14px 24px;
      border: none;
      border-radius: 8px;
      font-family: 'Poppins', sans-serif;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-primary {
      background: var(--bleu);
      color: white;
    }

    .btn-primary:hover {
      background: #2a2bb5;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(55, 57, 218, 0.3);
    }

    .btn-secondary {
      background: white;
      color: var(--bleu);
      border: 1px solid var(--bleu);
    }

    .btn-secondary:hover {
      background: #f5f6ff;
    }

    .btn-primary:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }

    .reassurance-box {
      background: #f0f9ff;
      border: 1px solid #bae6fd;
      border-radius: 8px;
      padding: 20px;
      margin: 25px 0;
    }

    .reassurance-item {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
      font-size: 14px;
      color: #333;
    }

    .reassurance-item:last-child {
      margin-bottom: 0;
    }

    .check-icon {
      color: var(--vert);
      font-size: 18px;
      font-weight: bold;
    }

    .rating-text {
      text-align: center;
      margin-top: 15px;
      font-size: 13px;
      color: #666;
      font-weight: 600;
    }

    .rating-stars {
      color: #fbbf24;
      margin-right: 5px;
    }

    .info-bullets {
      background: #e6f7f0;
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
    }

    .info-bullets ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .info-bullets li {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 12px;
      font-size: 13px;
      color: #333;
      line-height: 1.6;
    }

    .info-bullets li:last-child {
      margin-bottom: 0;
    }

    .bullet-icon {
      color: var(--vert);
      font-weight: bold;
      flex-shrink: 0;
    }

    .reviews-carousel {
      margin-top: 30px;
      padding: 20px;
      background: #fff;
      border: 2px solid var(--bleu);
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(55, 57, 218, 0.1);
    }

    .carousel-indicators {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 15px;
    }

    .indicator-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #ddd;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .indicator-dot.active {
      background: var(--bleu);
      width: 24px;
      border-radius: 4px;
    }

    .review-card {
      display: none;
      animation: slideIn 0.5s ease;
    }

    .review-card.active {
      display: block;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(20px);
      }

      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .review-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 12px;
    }

    .review-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: #e0e0e0;
      overflow: hidden;
    }

    .review-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .review-info h4 {
      font-size: 14px;
      font-weight: 600;
      color: #333;
      margin-bottom: 3px;
    }

    .review-meta {
      font-size: 11px;
      color: #999;
    }

    .review-stars {
      color: #fbbf24;
      font-size: 14px;
      margin-bottom: 8px;
    }

    .google-logo {
      width: 16px;
      height: 16px;
      vertical-align: middle;
      margin-right: 5px;
    }

    .review-text {
      font-size: 13px;
      color: #666;
      line-height: 1.6;
    }

    .success-message {
      display: none;
      text-align: left;
      padding: 20px 0;
    }

    .success-message.active {
      display: block;
    }

    .success-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 20px;
      background: var(--vert);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      color: white;
    }

    .success-title {
      color: var(--bleu);
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 20px;
      text-align: center;
    }

    .success-text {
      color: #666;
      font-size: 14px;
      line-height: 1.8;
      margin-bottom: 15px;
    }

    .contact-box {
      background: #f0f9ff;
      border: 1px solid #bae6fd;
      border-radius: 8px;
      padding: 15px;
      margin-top: 20px;
      font-size: 13px;
      color: #333;
      line-height: 1.6;
    }

    @media (max-width: 600px) {
      .form-row {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 30px 20px;
      }

      h1 {
        font-size: 20px;
      }

      .step-label {
        font-size: 10px;
      }

      .support-bubble {
        bottom: 20px;
        right: 20px;
      }

      .support-avatar {
        width: 50px;
        height: 50px;
      }
    }
  </style>
</head>

<body>


  <div class="container">
    <div class="header" id="mainHeader">
      <div class="logos">
        <img src="https://cdn.prod.website-files.com/62e7db7cc9c73e6d6a8e326b/68e946c91b995ba903e54612_logo.svg"
          alt="Urssaf" class="logo-img">
      </div>
      <h1>Remplissez le formulaire avec les informations du titulaire du compte URSSAF (pour bénéficier de l'avance
        immédiate).</h1>
      <span class="time-info">⏱ 1 minute</span>
    </div>
    <div class="progress-bar step-1" id="progressBar">
      <div class="progress-step active" data-step="1">
        <div class="step-circle">1</div>
        <div class="step-label">Vos
          <br>informations
        </div>
      </div>
      <div class="progress-step" data-step="2">
        <div class="step-circle">2</div>
        <div class="step-label">Votre
          <br>adresse
        </div>
      </div>
      <div class="progress-step" data-step="3">
        <div class="step-circle">3</div>
        <div class="step-label">Finaliser
          <br>l'inscription
        </div>
      </div>
    </div>
    <form id="urssafForm">
      <!-- Étape 1 -->
      <div class="form-step active" data-step="1">
        <div class="warning-box">
          <div class="warning-text">Remplissez le formulaire avec les informations de la personne liée au compte URSSAF
            (pour bénéficier de l'avance immédiate).</div>
        </div>
        <div class="form-group">
          <label>Email utilisé sur votre compte URSSAF
            <span class="required">*</span>
          </label>
          <div class="help-text">Identique à la fiche du foyer fiscal</div>
          <input type="email" name="email" required placeholder="jean.dupont@email.com">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Nom de naissance
              <span class="required">*</span>
            </label>
            <div class="help-text">Identique à la fiche du foyer fiscal</div>
            <input type="text" name="nomNaissance" required placeholder="Dupont">
          </div>
          <div class="form-group">
            <label>Nom d'usage
              <span class="required">*</span>
            </label>
            <div class="help-text">Identique à la fiche du foyer fiscal</div>
            <input type="text" name="nomUsage" required placeholder="Martin">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Prénoms
              <span class="required">*</span>
            </label>
            <div class="help-text">Identique à la fiche du foyer fiscal</div>
            <input type="text" name="prenoms" required placeholder="Jean Pierre">
          </div>
          <div class="form-group">
            <label>Civilité
              <span class="required">*</span>
            </label>
            <div class="help-text">Identique à la fiche du foyer fiscal</div>
            <select name="civilite" required>
              <option value="">Sélectionner...</option>
              <option value="monsieur">Monsieur</option>
              <option value="madame">Madame</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Numéro de téléphone portable
              <span class="required">*</span>
            </label>
            <div class="help-text">Identique à la fiche du foyer fiscal</div>
            <input type="tel" name="telephone" required placeholder="+33712345678">
          </div>
          <div class="form-group">
            <label>Date de naissance
              <span class="required">*</span>
            </label>
            <div class="help-text">Identique à la fiche du foyer fiscal</div>
            <input type="date" name="dateNaissance" required>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Commune de naissance
              <span class="required">*</span>
            </label>
            <div class="help-text">Identique à la fiche du foyer fiscal</div>
            <input type="text" name="communeNaissance" required placeholder="Paris">
          </div>
          <div class="form-group">
            <label>Code commune de naissance
              <span class="required">*</span>
            </label>
            <div class="help-text">Identique à la fiche du foyer fiscal</div>
            <input type="text" name="codeCommuneNaissance" required placeholder="75001">
          </div>
        </div>
        <div class="form-group">
          <label>Pays de naissance
            <span class="required">*</span>
          </label>
          <div class="help-text">Identique à la fiche du foyer fiscal</div>
          <input type="text" name="paysNaissance" required placeholder="France" value="France">
        </div>
        <div class="button-group">
          <button type="button" class="btn-primary" onclick="nextStep()">Continuer →</button>
        </div>
      </div>
      <!-- Étape 2 -->
      <div class="form-step" data-step="2">
        <div class="form-group">
          <label>Numéro de rue de résidence
            <span class="required">*</span>
          </label>
          <input type="text" name="numeroRue" required placeholder="1 bis">
        </div>
        <div class="form-group">
          <label>Nom de la voie de résidence
            <span class="required">*</span>
          </label>
          <input type="text" name="nomVoie" required placeholder="rue de Billancourt">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Ville de résidence
              <span class="required">*</span>
            </label>
            <input type="text" name="villeResidence" required placeholder="Paris">
          </div>
          <div class="form-group">
            <label>Code postal de résidence
              <span class="required">*</span>
            </label>
            <input type="text" name="codePostalResidence" required placeholder="75001">
          </div>
        </div>
        <div class="form-group">
          <label>Pays de résidence
            <span class="required">*</span>
          </label>
          <input type="text" name="paysResidence" required value="France">
        </div>
        <div class="button-group">
          <button type="button" class="btn-secondary" onclick="prevStep()">← Retour</button>
          <button type="button" class="btn-primary" onclick="nextStep()">Continuer →</button>
        </div>
      </div>
      <!-- Étape 3 -->
      <div class="form-step" data-step="3">
        <div class="form-row">
          <div class="form-group">
            <label>IBAN
              <span class="required">*</span>
            </label>
            <input type="text" name="iban" required placeholder="FR76...">
          </div>
          <div class="form-group">
            <label>BIC de l'IBAN
              <span class="required">*</span>
            </label>
            <input type="text" name="bic" required placeholder="BNPAFRPP">
          </div>
        </div>
        <div class="form-group">
          <label>Titulaire du compte bancaire
            <span class="required">*</span>
          </label>
          <input type="text" name="titulaireCompte" required placeholder="Jean Dupont">
        </div>
        <div class="button-group">
          <button type="button" class="btn-secondary" onclick="prevStep()">← Retour</button>
          <button type="submit" class="btn-primary" id="submitBtn">Envoyer</button>
        </div>
        <div class="reassurance-box">
          <div class="reassurance-item">
            <span class="check-icon">✓</span>
            <span>Sans engagement</span>
          </div>
          <div class="reassurance-item">
            <span class="check-icon">✓</span>
            <span>Cours à la carte</span>
          </div>
          <div class="reassurance-item">
            <span class="check-icon">✓</span>
            <span>Compte rendu hebdomadaire</span>
          </div>
          <div class="rating-text">
            <span class="rating-stars">★★★★★</span>Notée 4,8/5 par nos familles
          </div>
        </div>
        <div class="info-bullets">
          <ul>
            <li>
              <span class="bullet-icon">•</span>
              <span>Vos coordonnées bancaires ne sont pas stockées par Eddmon.</span>
            </li>
            <li>
              <span class="bullet-icon">•</span>
              <span>Elles sont uniquement transmises à l'URSSAF pour la gestion du service d'avance immédiate.</span>
            </li>
            <li>
              <span class="bullet-icon">•</span>
              <span>Dans le cadre de ce processus, vous donnez votre consentement à la société Eddmon pour stocker vos
                autres données nécessaires à la mise en place de l'aide.</span>
            </li>
          </ul>
        </div>
        <div class="reviews-carousel" id="reviewsCarousel">
          <div class="review-card active">
            <div class="review-header">
              <div class="review-avatar">
                <img src="https://ui-avatars.com/api/?name=Sophie+Martin&background=3739da&color=fff"
                  alt="Sophie Martin">
              </div>
              <div class="review-info">
                <h4>Sophie Martin</h4>
                <div class="review-meta">Il y a 2 mois • Cliente depuis 6 mois</div>
              </div>
            </div>
            <div class="review-stars">
              <img
                src="https://cdn.prod.website-files.com/62e7db7cc9c73e6d6a8e326b/68e95405768ee92f5651cc39_7611770.png"
                class="google-logo" alt="Google">
              ★★★★★
            </div>
            <div class="review-text">Excellente expérience avec Eddmon ! Le tuteur est très pédagogue et ma fille a
              rapidement progressé.</div>
          </div>
          <div class="review-card">
            <div class="review-header">
              <div class="review-avatar">
                <img src="https://ui-avatars.com/api/?name=Pierre+Dubois&background=3739da&color=fff"
                  alt="Pierre Dubois">
              </div>
              <div class="review-info">
                <h4>Pierre Dubois</h4>
                <div class="review-meta">Il y a 1 mois • Client depuis 4 mois</div>
              </div>
            </div>
            <div class="review-stars">
              <img
                src="https://cdn.prod.website-files.com/62e7db7cc9c73e6d6a8e326b/68e95405768ee92f5651cc39_7611770.png"
                class="google-logo" alt="Google">
              ★★★★★
            </div>
            <div class="review-text">Service impeccable, très professionnel. Le suivi est régulier et rassurant. Je
              recommande !</div>
          </div>
          <div class="review-card">
            <div class="review-header">
              <div class="review-avatar">
                <img src="https://ui-avatars.com/api/?name=Marie+Laurent&background=3739da&color=fff"
                  alt="Marie Laurent">
              </div>
              <div class="review-info">
                <h4>Marie Laurent</h4>
                <div class="review-meta">Il y a 3 semaines • Cliente depuis 8 mois</div>
              </div>
            </div>
            <div class="review-stars">
              <img
                src="https://cdn.prod.website-files.com/62e7db7cc9c73e6d6a8e326b/68e95405768ee92f5651cc39_7611770.png"
                class="google-logo" alt="Google">
              ★★★★★
            </div>
            <div class="review-text">Mon fils adore ses cours avec Eddmon. Le tuteur est patient et s'adapte
              parfaitement.</div>
          </div>
          <div class="review-card">
            <div class="review-header">
              <div class="review-avatar">
                <img src="https://ui-avatars.com/api/?name=Thomas+Bernard&background=3739da&color=fff"
                  alt="Thomas Bernard">
              </div>
              <div class="review-info">
                <h4>Thomas Bernard</h4>
                <div class="review-meta">Il y a 2 semaines • Client depuis 5 mois</div>
              </div>
            </div>
            <div class="review-stars">
              <img
                src="https://cdn.prod.website-files.com/62e7db7cc9c73e6d6a8e326b/68e95405768ee92f5651cc39_7611770.png"
                class="google-logo" alt="Google">
              ★★★★★
            </div>
            <div class="review-text">Un service de qualité avec des tuteurs compétents. L'application de suivi est très
              pratique.</div>
          </div>
          <div class="review-card">
            <div class="review-header">
              <div class="review-avatar">
                <img src="https://ui-avatars.com/api/?name=Claire+Petit&background=3739da&color=fff" alt="Claire Petit">
              </div>
              <div class="review-info">
                <h4>Claire Petit</h4>
                <div class="review-meta">Il y a 1 semaine • Cliente depuis 3 mois</div>
              </div>
            </div>
            <div class="review-stars">
              <img
                src="https://cdn.prod.website-files.com/62e7db7cc9c73e6d6a8e326b/68e95405768ee92f5651cc39_7611770.png"
                class="google-logo" alt="Google">
              ★★★★★
            </div>
            <div class="review-text">Ma fille a repris confiance grâce aux cours Eddmon. Merci pour votre accompagnement
              !</div>
          </div>
          <div class="carousel-indicators">
            <div class="indicator-dot active" onclick="goToReview(0)"></div>
            <div class="indicator-dot" onclick="goToReview(1)"></div>
            <div class="indicator-dot" onclick="goToReview(2)"></div>
            <div class="indicator-dot" onclick="goToReview(3)"></div>
            <div class="indicator-dot" onclick="goToReview(4)"></div>
          </div>
        </div>
      </div>
    </form>
    <div class="success-message" id="successMessage">
      <div class="success-icon">✓</div>
      <div class="success-title">Merci
        <span id="userName">
        </span>, et bienvenue chez Eddmon 👋
      </div>
      <div class="success-text">Vois informations ont bien été reçues.<br>La personne en charge de votre dossier va
        créer votre URSSAF, vous recevrez un email de validation -> une fois cette étape complétée,
        nous rechercherons le meilleur tuteur pour votre enfant,
        puis nous vous appellerons afin de vous le présenter.</div>
      <div class="contact-box">Pour toute question, vous pouvez nous contacter à eddmon@eddmon.fr !</div>
    </div>
  </div>
  <script>
    let currentStep = 1;
    let currentReview = 0;
    const totalReviews = 5;
    function updateProgress() {
      const progressBar = document.getElementById('progressBar');
      progressBar.className = `progress-bar step-${currentStep
        }
`;
      document.querySelectorAll('.progress-step').forEach((step, index) => {
        const stepNum = index + 1;
        if (stepNum < currentStep) {
          step.classList.add('completed');
          step.classList.remove('active');
        }
        else if (stepNum === currentStep) {
          step.classList.add('active');
          step.classList.remove('completed');
        }
        else {
          step.classList.remove('active', 'completed');
        }
      });
      document.querySelectorAll('.form-step').forEach(step => {
        step.classList.remove('active');
      });
      document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.add('active');
    }
    function validateStep(step) {
      const currentStepEl = document.querySelector(`.form-step[data-step="${step}"]`);
      const inputs = currentStepEl.querySelectorAll('input[required], select[required]');
      let isValid = true;
      inputs.forEach(input => {
        if (!input.value.trim()) {
          input.focus();
          input.style.borderColor = 'red';
          isValid = false;
        } else {
          input.style.borderColor = '';
        }
      });
      return isValid;
    }
    function nextStep() {
      if (validateStep(currentStep)) {
        if (currentStep < 3) {
          currentStep++;
          updateProgress();
          scrollToTop(); // ← REMPLACEZ window.scrollTo par ceci
          setTimeout(sendHeight, 100);
        }
      }
    }

    function prevStep() {
      if (currentStep > 1) {
        currentStep--;
        updateProgress();
        scrollToTop(); // ← REMPLACEZ window.scrollTo par ceci
        setTimeout(sendHeight, 100);
      }
    }

    // Carousel d'avis
    function rotateReviews() {
      const reviews = document.querySelectorAll('.review-card');
      const indicators = document.querySelectorAll('.indicator-dot');

      reviews[currentReview].classList.remove('active');
      indicators[currentReview].classList.remove('active');

      currentReview = (currentReview + 1) % totalReviews;

      reviews[currentReview].classList.add('active');
      indicators[currentReview].classList.add('active');
    }

    function goToReview(index) {
      const reviews = document.querySelectorAll('.review-card');
      const indicators = document.querySelectorAll('.indicator-dot');

      reviews[currentReview].classList.remove('active');
      indicators[currentReview].classList.remove('active');

      currentReview = index;

      reviews[currentReview].classList.add('active');
      indicators[currentReview].classList.add('active');
    }

    setInterval(rotateReviews, 5000);

    document.getElementById('urssafForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!validateStep(3)) {
        alert("Veuillez remplir tous les champs requis à l'étape 3.");
        return;
      }
      const submitBtn = document.getElementById('submitBtn');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Envoi en cours...';
      const formData = new FormData(e.target);
      const data = Object.fromEntries(formData.entries());
      try {
        const response = await fetch('https://n8n.srv791471.hstgr.cloud/webhook/088e9d19-faad-4d20-a64e-3b590cb70019', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
        if (!response.ok) {
          throw new Error(`Erreur HTTP! statut: ${response.status}`);
        }
        const civilite = data.civilite === 'monsieur' ? 'Monsieur' : 'Madame';
        const nom = data.nomUsage || data.nomNaissance || '';
        document.getElementById('userName').textContent = `${civilite} ${nom}`;
        document.getElementById('mainHeader').style.display = 'none';
        document.getElementById('progressBar').style.display = 'none';
        document.getElementById('urssafForm').style.display = 'none';
        document.getElementById('successMessage').classList.add('active');
        scrollToTop();
        setTimeout(sendHeight, 100);
      } catch (error) {
        console.error("Erreur lors de l'envoi :", error);
        alert('Une erreur est survenue. Veuillez réessayer ou vérifier votre connexion.');
        submitBtn.disabled = false;
        submitBtn.textContent = 'Envoyer';
      }
    });

    let heightSent = false;

    // Fonction pour scroller en haut de la page parent
    function scrollToTop() {
      window.parent.postMessage({
        type: 'eddmon-urssaf-scroll-top'
      }, '*');
    }

    // Fonction pour envoyer la hauteur au parent
    function sendHeight() {
      if (heightSent) return;

      const height = document.documentElement.scrollHeight;
      window.parent.postMessage({
        type: 'eddmon-urssaf-height',
        height: height
      }, '*');

      heightSent = true;

      setTimeout(() => {
        heightSent = false;
      }, 500);
    }

    // Envoie la hauteur au chargement
    window.addEventListener('load', () => setTimeout(sendHeight, 100));
    window.addEventListener('DOMContentLoaded', () => setTimeout(sendHeight, 100));

    // Observer les changements pour ajuster la hauteur
    const observer = new MutationObserver(() => {
      setTimeout(sendHeight, 100);
    });

    observer.observe(document.getElementById('urssafForm'), {
      childList: true,
      subtree: true
    });

  </script>
</body>

</html>
